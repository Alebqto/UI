"use strict";var __decorate=this&&this.__decorate||function(e,o,r,s){var t,n=arguments.length,i=n<3?o:null===s?s=Object.getOwnPropertyDescriptor(o,r):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,o,r,s);else for(var a=e.length-1;0<=a;a--)(t=e[a])&&(i=(n<3?t(i):3<n?t(o,r,i):t(o,r))||i);return 3<n&&i&&Object.defineProperty(o,r,i),i};Object.defineProperty(exports,"__esModule",{value:!0});var core_1=require("@angular/core"),LoginComponent=function(){function e(e,o,r){this.loginService=e,this.router=o,this.userService=r,this.msgLogin=[],this.UserModel={id:null,username:"",password:"",confirmationPassword:"",firstName:"",lastName:"",email:"",companyCode:"",description:"",blockedUser:!1,activeUser:!0,userLanguage:{id:3,code:"NL",value:"Dutch"}},this.ChangePwdModel={username:"",currentPassword:"",newPassword:"",confirmationPassword:""},this.loginService.logout()}return e.prototype.ngOnInit=function(){},e.prototype.init=function(){},e.prototype.doLogin=function(){var r=this;return""===this.UserModel.username?(this.msgLogin=[],void this.msgLogin.push({severity:"error",summary:"Error",detail:"you must enter username"})):""===this.UserModel.password||this.UserModel.password.length<4?(this.msgLogin=[],void this.msgLogin.push({severity:"error",summary:"Error",detail:"you must enter a password greater than 4 digits"})):void this.loginService.doLogin(this.UserModel.username,this.UserModel.password).subscribe(function(e){r.loginService.loggedIn=!0,localStorage.setItem("clientToken",e.access_token),localStorage.setItem("clientRefreshToken",e.refresh_token);var o={};r.userService.getUser(r.UserModel.username,e.access_token).subscribe(function(e){r.userService.userSession=e,o=e,sessionStorage.setItem("userId",o.id),sessionStorage.setItem("username",o.username),sessionStorage.setItem("sessionActive","true"),sessionStorage.setItem("username",r.UserModel.username),sessionStorage.setItem("password",r.UserModel.password)}),r.router.navigate(["user"])},function(e){switch(console.log(e),e.error.error_description){case"Bad credentials":r.msgLogin.push({severity:"error",summary:"Error",detail:"Username/Password invalid"}),r.loginService.loggedIn=!1}})},e.prototype.logout=function(){this.loginService.loggedIn=!1,this.router.navigate(["/login"])},e.prototype.changePassword=function(){},e.prototype.reset=function(){},e=__decorate([core_1.Component({selector:"app-login",templateUrl:"./login.component.html",styleUrls:["./login.component.css"]})],e)}();exports.LoginComponent=LoginComponent;